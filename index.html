<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Simple Referral Link</title>
<style>
  body { font-family: Arial, sans-serif; max-width: 480px; margin: auto; padding: 20px; }
  input { width: 100%; font-size: 1em; padding: 8px; }
  button { margin-top: 10px; padding: 10px; font-size: 1em; cursor: pointer; }
  #copyMsg { color: green; margin-top: 5px; height: 20px; }
</style>
</head>
<body>

<h1>Your Referral Link</h1>

<input type="text" id="refLink" readonly placeholder="Loading your referral link..." />
<button onclick="copyRefLink()">Copy Referral Link</button>
<div id="copyMsg"></div>

<script>
  const tg = window.Telegram?.WebApp;
  tg?.expand();

  // Get current user's Telegram ID
  const telegramId = tg?.initDataUnsafe?.user?.id || null;

  const refLinkInput = document.getElementById("refLink");

  if (telegramId) {
    // Construct referral link with your bot username and the current user's Telegram ID
    refLinkInput.value = `https://t.me/YourBotUsername?start=${telegramId}`;
  } else {
    refLinkInput.value = "Open this WebApp via your Telegram bot to get your referral link.";
  }

  // Copy referral link to clipboard
  function copyRefLink() {
    if (!refLinkInput.value) return;
    navigator.clipboard.writeText(refLinkInput.value).then(() => {
      document.getElementById("copyMsg").textContent = "âœ… Referral link copied!";
      setTimeout(() => {
        document.getElementById("copyMsg").textContent = "";
      }, 2000);
    });
  }
</script>

</body>
</html>